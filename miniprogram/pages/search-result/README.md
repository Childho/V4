# 搜索结果页面使用说明

## 页面路径
`/pages/search-result/search-result`

## 页面参数
- `keyword`: 搜索关键词（必填）

## 使用方法

### 从其他页面跳转到搜索结果页

```javascript
// 示例1：从首页搜索栏跳转
wx.navigateTo({
  url: `/pages/search-result/search-result?keyword=${encodeURIComponent(searchKeyword)}`
});

// 示例2：从商城页面跳转
wx.navigateTo({
  url: `/pages/search-result/search-result?keyword=羽毛球拍`
});
```

### 页面功能

1. **顶部分类导航**
   - 支持横向滚动
   - 6个固定分类：羽毛球拍、球鞋、球服、球包、羽毛球、运动必备
   - 点击分类重新筛选商品

2. **排序与筛选**
   - 支持按销量/价格排序
   - 品牌多选筛选弹窗
   - 包含10个羽毛球运动品牌

3. **商品列表**
   - 双列瀑布流布局
   - 支持分页加载
   - 点击商品跳转详情页

4. **交互功能**
   - 下拉刷新
   - 上拉加载更多
   - 空状态提示

## 开发说明

- 页面使用小程序原生开发，无第三方框架依赖
- 支持开发环境mock数据测试
- 响应式设计，适配不同机型
- 遵循项目通用规范和命名约定

## API接口

页面使用的API接口：
- `POST /api/search/products` - 搜索商品
- `POST /api/search/categories` - 获取分类
- `POST /api/search/brands` - 获取品牌

## 注意事项

1. 搜索关键词需要进行URL编码
2. 开发环境会使用mock数据，生产环境需要配置真实接口
3. 图片资源建议使用CDN或本地资源

# 商城搜索结果页面功能说明

## 📦 新增的商品数据（18个商品）

现在页面包含了18个静态商品数据，分布在6个不同分类中：

### 商品分类分布：
- **羽毛球拍**：4个商品（尤尼克斯、李宁、威克多、凯胜）
- **羽毛球鞋**：4个商品（李宁、尤尼克斯、威克多、川崎）
- **球服**：3个商品（尤尼克斯、李宁、威克多）
- **球包**：3个商品（威克多、尤尼克斯、李宁）
- **羽毛球**：2个商品（尤尼克斯、亚狮龙）
- **运动必备**：2个商品（李宁护腕、运动毛巾）

### 商品字段包含：
- 商品ID
- 商品名称
- 品牌
- 分类（重要：用于筛选功能）
- 图片（使用占位图）
- 价格和原价
- 销量
- 评分

## 🔍 分类筛选功能

### 交互逻辑：
1. **默认状态**：页面加载时显示"全部"商品（18个）
2. **点击分类**：选择具体分类（如"羽毛球鞋"）后，只显示该分类商品
3. **选中状态**：被选中的分类有高亮效果（蓝色渐变背景）
4. **恢复全部**：点击"全部"按钮可恢复显示所有商品

### 视觉效果：
- 选中的分类有明显的颜色变化和阴影效果
- 未选中的分类保持灰色背景
- 同时只有一个分类处于选中状态

## 🔄 商品排序功能（新增）

### 排序类型：
1. **销量排序**：
   - 默认：销量从高到低（↓）
   - 再次点击：销量从低到高（↑）
   - 继续点击：循环切换排序方向

2. **价格排序**：
   - 默认：价格从低到高（↑）
   - 再次点击：价格从高到低（↓）
   - 继续点击：循环切换排序方向

### 交互逻辑：
- **互斥选择**：同时只能有一种排序生效
- **方向切换**：点击已选中的排序按钮会切换排序方向
- **视觉反馈**：选中的排序按钮会高亮，并显示箭头方向（↑/↓）
- **默认排序**：页面加载时按"销量从高到低"排序

### 排序优先级：
1. **搜索相关性**：如果有搜索关键词，优先按相关性排序
2. **用户选择排序**：相关性相同时，按用户选择的排序方式
3. **分类筛选**：排序会应用在筛选后的商品列表上

## 🎯 测试方法

### 分类筛选测试：
1. 打开商城搜索结果页面
2. 观察顶部分类导航栏（全部、羽毛球拍、羽毛球鞋等）
3. 点击"羽毛球鞋"，页面应该只显示4个鞋类商品
4. 点击"球服"，页面应该只显示3个球服商品
5. 点击"全部"，页面恢复显示所有18个商品
6. 观察选中状态的视觉反馈

### 排序功能测试：
1. **销量排序测试**：
   - 点击"销量"按钮，观察商品按销量从高到低排列
   - 再次点击"销量"，观察商品按销量从低到高排列
   - 注意排序按钮的箭头方向变化（↓→↑）

2. **价格排序测试**：
   - 点击"价格"按钮，观察商品按价格从低到高排列
   - 再次点击"价格"，观察商品按价格从高到低排列
   - 注意排序按钮的箭头方向变化（↑→↓）

3. **排序切换测试**：
   - 在销量排序时点击价格，确认切换到价格排序
   - 确认每次只有一个排序按钮高亮
   - 切换排序时使用该类型的默认方向

4. **组合功能测试**：
   - 先选择分类筛选（如"羽毛球鞋"）
   - 再进行排序，确认排序应用在筛选后的商品上
   - 尝试搜索关键词+分类+排序的组合

## 🔧 技术实现

- 使用静态数据代替API调用（避免接口依赖）
- 在 `setDefaultProducts()` 方法中实现分类筛选逻辑
- 通过 `currentCategoryId` 状态管理当前选中分类
- 点击分类时调用 `onCategoryTap()` 更新筛选状态
- **新增** `applySorting()` 方法处理商品排序逻辑
- **新增** `currentSortType` 和 `currentSortDirection` 管理排序状态
- **优化** `onSortTap()` 方法支持排序方向切换
- **更新** `sortOptions` 数据结构，包含排序方向和图标信息

## 📱 小程序规范遵循

- 使用微信小程序原生框架（wxml + wxss + js）
- 遵循项目目录结构规范
- 代码注释详细，便于理解和维护
- 响应式布局，适配不同屏幕尺寸 