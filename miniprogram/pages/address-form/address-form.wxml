<!-- 地址新增/编辑页面模板 -->
<view class="container">
  <!-- 表单区域 -->
  <form bindsubmit="onSubmit" class="address-form">
    
    <!-- 地区选择器 -->
    <view class="form-item">
      <view class="label required">所在地区</view>
      <picker 
        mode="region" 
        bindchange="onRegionChange" 
        value="{{regionArray}}"
        class="region-picker"
      >
        <view class="picker-content {{!formData.region ? 'placeholder' : ''}}">
          {{formData.region || '请选择省市区'}}
          <text class="arrow">></text>
        </view>
      </picker>
      <!-- 地区选择错误提示 -->
      <view class="error-tip" wx:if="{{errors.region}}">{{errors.region}}</view>
    </view>

    <!-- 详细地址输入 -->
    <view class="form-item">
      <view class="label required">详细地址</view>
      <textarea 
        class="detail-input"
        placeholder="请输入详细地址（如：某某小区某栋某号）"
        value="{{formData.detail}}"
        bindinput="onDetailInput"
        maxlength="100"
        auto-height
        show-confirm-bar="{{false}}"
      />
      <view class="char-count">{{formData.detail.length}}/100</view>
      <!-- 详细地址错误提示 -->
      <view class="error-tip" wx:if="{{errors.detail}}">{{errors.detail}}</view>
    </view>

    <!-- 收件人姓名输入 -->
    <view class="form-item">
      <view class="label required">收件人</view>
      <input 
        class="text-input"
        placeholder="请输入收件人姓名"
        value="{{formData.consignee}}"
        bindinput="onConsigneeInput"
        maxlength="20"
      />
      <!-- 收件人错误提示 -->
      <view class="error-tip" wx:if="{{errors.consignee}}">{{errors.consignee}}</view>
    </view>

    <!-- 手机号码输入 -->
    <view class="form-item">
      <view class="label required">手机号码</view>
      <input 
        class="text-input"
        placeholder="请输入11位手机号码"
        value="{{formData.mobile}}"
        bindinput="onMobileInput"
        type="number"
        maxlength="11"
      />
      <!-- 手机号错误提示 -->
      <view class="error-tip" wx:if="{{errors.mobile}}">{{errors.mobile}}</view>
    </view>

    <!-- 设为默认地址开关 -->
    <view class="form-item switch-item">
      <view class="label">设为默认地址</view>
      <switch 
        checked="{{formData.isDefault}}"
        bindchange="onDefaultChange"
        color="#007aff"
      />
    </view>

    <!-- 提交按钮 -->
    <view class="submit-section">
      <button 
        class="submit-btn {{isFormValid ? 'active' : ''}}"
        form-type="submit"
        disabled="{{!isFormValid || submitting}}"
      >
        {{submitting ? '保存中...' : '保存地址'}}
      </button>
    </view>
  </form>

  <!-- 删除按钮（仅编辑模式显示） -->
  <view class="delete-section" wx:if="{{isEditMode}}">
    <button class="delete-btn" bindtap="deleteCurrentAddress">
      删除此地址
    </button>
  </view>
</view> 