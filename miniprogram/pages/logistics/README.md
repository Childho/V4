# 物流查询页面

## 页面功能

### 核心功能
1. **订单物流信息展示**
   - 订单号码（支持复制）
   - 物流公司名称
   - 运单号码（支持复制）
   - 物流状态（运输中、已签收等）

2. **物流轨迹时间线**
   - 时间倒序展示物流节点
   - 当前最新状态高亮显示
   - 显示时间、状态描述、网点位置

3. **异常状态处理**
   - 暂无物流信息提示
   - 网络异常重试机制
   - 用户友好的错误提示

4. **用户交互功能**
   - 下拉刷新物流信息
   - 联系客服（在线客服/电话客服）
   - 拨打物流公司客服电话
   - 页面分享功能

## 页面跳转

### 入口页面
- **订单列表页面**：点击"查看物流"按钮跳转
- **订单详情页面**：点击物流信息区域跳转

### 跳转参数
```javascript
// 必需参数
orderId: string  // 订单ID

// 使用示例
wx.navigateTo({
  url: `/pages/logistics/index?orderId=${orderId}`
});
```

## 数据结构

### 物流信息数据格式
```javascript
{
  status: 'shipping|delivered|pending|exception',  // 物流状态
  statusText: '运输中',                            // 状态文字
  companyName: '顺丰速运',                          // 物流公司
  trackingNo: 'SF1234567890',                     // 运单号
  tracks: [                                       // 物流轨迹
    {
      time: '2024-01-16 14:30:25',              // 时间
      status: '快件已到达北京分拣中心',            // 状态描述
      location: '北京分拣中心'                    // 地点
    }
  ],
  companyInfo: {                                 // 物流公司信息
    name: '顺丰速运',
    phone: '95338',
    logo: 'https://...'
  }
}
```

## API接口

### 1. 查询物流信息
- **接口**：`POST /api/logistics/query`
- **参数**：`{ orderId: string }`
- **返回**：物流信息对象

### 2. 获取物流公司列表
- **接口**：`GET /api/logistics/companies`
- **参数**：`{}`
- **返回**：物流公司列表

## Mock数据

页面内置了3套Mock数据用于开发测试：
1. **运输中状态**：完整的物流轨迹信息
2. **已签收状态**：包含签收信息的完整轨迹
3. **待发货状态**：暂无物流轨迹的情况

根据订单ID的最后一位数字自动选择对应的Mock数据集。

## 设计特点

### UI设计
- **现代电商风格**：参考主流电商平台设计
- **卡片化布局**：信息层次清晰，易于阅读
- **时间线设计**：直观展示物流流转过程
- **响应式布局**：适配不同屏幕尺寸

### 用户体验
- **加载状态**：友好的加载动画
- **错误处理**：完善的异常状态提示
- **操作反馈**：及时的Toast提示
- **一键操作**：快速复制、拨打电话

### 性能优化
- **降级策略**：API失败时自动使用Mock数据
- **缓存机制**：避免重复请求
- **懒加载**：按需加载物流公司信息

## 开发规范

### 文件结构
```
pages/logistics/
├── index.js     # 页面逻辑
├── index.json   # 页面配置
├── index.wxml   # 页面结构
├── index.wxss   # 页面样式
└── README.md    # 说明文档
```

### 代码规范
- 遵循微信小程序原生开发规范
- 符合@api.mdc API调用规范
- 详细的注释和错误处理
- 合理的组件化开发

## 后续扩展

### 功能扩展
1. **物流地图**：可视化展示物流路径
2. **预计送达**：基于大数据的送达时间预测
3. **物流评价**：对物流服务进行评价
4. **多包裹支持**：支持一个订单多个包裹的物流信息

### 技术优化
1. **实时推送**：物流状态变更时主动推送
2. **离线缓存**：支持离线查看物流信息
3. **语音播报**：物流状态语音播报功能 