<!-- æŸ¥çœ‹ç‰©æµé¡µé¢ -->
<view class="logistics-container">
  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-container" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">æ­£åœ¨æŸ¥è¯¢ç‰©æµä¿¡æ¯...</text>
  </view>

  <!-- ç‰©æµä¿¡æ¯å†…å®¹ -->
  <view class="logistics-content" wx:else>
    <!-- é¡¶éƒ¨è®¢å•ä¿¡æ¯å¡ç‰‡ -->
    <view class="order-info-card">
      <view class="card-header">
        <text class="header-title">è®¢å•ç‰©æµä¿¡æ¯</text>
        <view class="status-badge status-{{logisticsInfo.status}}">
          {{logisticsInfo.statusText}}
        </view>
      </view>
      
      <view class="order-details">
        <view class="detail-row">
          <text class="detail-label">è®¢å•å·ç ï¼š</text>
          <text class="detail-value">{{orderInfo.orderNo}}</text>
          <text class="copy-btn" bindtap="copyOrderNo">å¤åˆ¶</text>
        </view>
        <view class="detail-row">
          <text class="detail-label">ç‰©æµå…¬å¸ï¼š</text>
          <text class="detail-value">{{logisticsInfo.companyName}}</text>
        </view>
        <view class="detail-row">
          <text class="detail-label">è¿å•å·ç ï¼š</text>
          <text class="detail-value">{{logisticsInfo.trackingNo}}</text>
          <text class="copy-btn" bindtap="copyTrackingNo">å¤åˆ¶</text>
        </view>
      </view>
    </view>

    <!-- ç‰©æµè¿›åº¦æ—¶é—´çº¿ -->
    <view class="timeline-container" wx:if="{{logisticsInfo.tracks && logisticsInfo.tracks.length > 0}}">
      <view class="timeline-header">
        <text class="timeline-title">ç‰©æµè½¨è¿¹</text>
        <text class="timeline-subtitle">å…±{{logisticsInfo.tracks.length}}æ¡è®°å½•</text>
      </view>
      
      <view class="timeline-list">
        <view 
          class="timeline-item {{index === 0 ? 'active' : ''}}" 
          wx:for="{{logisticsInfo.tracks}}" 
          wx:key="index"
        >
          <!-- æ—¶é—´çº¿å·¦ä¾§åœ†ç‚¹å’Œçº¿æ¡ -->
          <view class="timeline-dot-wrapper">
            <view class="timeline-dot {{index === 0 ? 'current' : ''}}">
              <view class="dot-icon" wx:if="{{index === 0}}">ğŸ“</view>
            </view>
            <view class="timeline-line" wx:if="{{index < logisticsInfo.tracks.length - 1}}"></view>
          </view>
          
          <!-- æ—¶é—´çº¿å³ä¾§å†…å®¹ -->
          <view class="timeline-content">
            <view class="timeline-time">{{item.time}}</view>
            <view class="timeline-status">{{item.status}}</view>
            <view class="timeline-location" wx:if="{{item.location}}">{{item.location}}</view>
          </view>
        </view>
      </view>
    </view>

    <!-- å¼‚å¸¸çŠ¶æ€æç¤º -->
    <view class="error-container" wx:elif="{{!logisticsInfo.tracks || logisticsInfo.tracks.length === 0}}">
      <view class="error-icon">ğŸ“¦</view>
      <view class="error-title">æš‚æœªæŸ¥è¯¢åˆ°ç‰©æµä¿¡æ¯</view>
      <view class="error-desc">
        ç‰©æµä¿¡æ¯å¯èƒ½å­˜åœ¨å»¶è¿Ÿæ›´æ–°ï¼Œè¯·ç¨åé‡è¯•
      </view>
      <button class="retry-btn" bindtap="refreshLogistics">é‡æ–°æŸ¥è¯¢</button>
    </view>
  </view>

  <!-- ç‰©æµå…¬å¸ä¿¡æ¯å¡ç‰‡ -->
  <view class="company-info-card" wx:if="{{logisticsInfo.companyInfo && !loading}}">
    <view class="company-header">
      <image class="company-logo" src="{{logisticsInfo.companyInfo.logo}}" mode="aspectFit"></image>
      <view class="company-details">
        <text class="company-name">{{logisticsInfo.companyInfo.name}}</text>
        <text class="company-phone">å®¢æœç”µè¯ï¼š{{logisticsInfo.companyInfo.phone}}</text>
      </view>
    </view>
    <view class="company-actions">
      <button class="company-call-btn" bindtap="callCompany">
        ğŸ“ æ‹¨æ‰“å®¢æœ
      </button>
    </view>
  </view>
</view> 