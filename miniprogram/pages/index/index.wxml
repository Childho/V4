<!--index.wxml-->
<view class="index-container">
  <!-- 简化的header区域 - 去除通知功能 -->
  <view class="header" style="padding-top: {{statusBarHeight}}px;">
    <!-- 简化的搜索栏和会员等级区域 -->
    <view class="search-container">
      <!-- 左侧搜索栏 - 采用更现代的设计 -->
      <view class="search-bar">
        <!-- 使用更现代的搜索图标 -->
        <view class="search-icon">🔍</view>
        <input 
          class="search-input" 
          placeholder="搜索商品" 
          value="{{searchKeyword}}"
          bindinput="onSearchInput"
          bindconfirm="onSearchConfirm"
          confirm-type="search"
          placeholder-class="search-placeholder"
          focus="{{false}}"
        />
      </view>
      
      <!-- 右侧功能区域 - 仅保留会员徽章 -->
      <view class="header-actions">
        <!-- 会员徽章 - 更精致的设计 -->
        <view class="member-badge">
          <view class="member-icon">⭐</view>
          <text>初级会员</text>
        </view>
      </view>
    </view>
  </view>
  
  <!-- 优化后的轮播图区域 - 减少边距，增加视觉冲击力 -->
  <view class="banner-container">
    <swiper class="banner-swiper" indicator-dots="{{true}}" autoplay="{{true}}" interval="{{3000}}" duration="{{500}}" circular="{{true}}">
      <swiper-item wx:for="{{banners}}" wx:key="id">
        <!-- 使用更美观的banner图片 -->
        <image src="{{item.imageUrl}}" class="banner-image" mode="aspectFill" bindtap="handleBannerClick" data-id="{{item.id}}" data-type="{{item.type}}" />
        <!-- 添加遮罩层和文字，提升视觉效果 -->
        <view class="banner-overlay">
          <view class="banner-title">{{item.title}}</view>
          <view class="banner-subtitle">{{item.subtitle}}</view>
        </view>
      </swiper-item>
    </swiper>
  </view>
  
  <!-- 功能导航 - 使用更美观的图标 -->
  <view class="nav-container">
    <view class="nav-grid">
      <!-- 推广返佣功能 - 使用SVG图标替代emoji -->
      <view class="nav-item" bindtap="navigateTo" data-url="/pages/promotion/index">
        <view class="nav-icon">
          <image src="/assets/icons/promotion.svg" class="nav-icon-image" mode="aspectFit"></image>
        </view>
        <text>推广返佣</text>
      </view>
      <!-- 穿线服务功能 -->
      <view class="nav-item" bindtap="navigateTo" data-url="/pages/stringing/index">
        <view class="nav-icon">
          <image src="/assets/icons/stringing.svg" class="nav-icon-image" mode="aspectFit"></image>
        </view>
        <text>穿线服务</text>
      </view>
      <!-- 积分兑换 -->
      <view class="nav-item" bindtap="navigateTo" data-url="/pages/pointsExchange/index">
        <view class="nav-icon">
          <image src="/assets/icons/points-exchange.svg" class="nav-icon-image" mode="aspectFit"></image>
        </view>
        <text>积分兑换</text>
      </view>
      <!-- 客服服务 -->
      <button class="nav-item" open-type="contact" show-message-card="{{true}}" bindcontact="onContactButton">
        <view class="nav-icon">
          <image src="/assets/icons/service-headset.svg" class="nav-icon-image" mode="aspectFit"></image>
        </view>
        <text>客服服务</text>
      </button>
    </view>
  </view>
  
  <!-- 热门活动部分 - 保持原有结构 -->
  <view class="section-container">
    <!-- 标题和"查看全部"移到外部 -->
    <view class="section-header">
      <view class="section-title">
        <text class="section-emoji">🔥</text>
        <text>热门活动</text>
      </view>
      <view class="more-btn" bindtap="navigateTo" data-url="/pages/activity/index">查看全部 ></view>
    </view>
    
    <!-- 活动列表 - 使用更美观的默认图片 -->
    <view class="activity-list">
      <view class="activity-card" wx:for="{{activities}}" wx:key="id" bindtap="navigateToDetail" data-id="{{item.id}}" data-type="activity">
        <!-- 活动图片区域 -->
        <view class="activity-image-container">
          <image class="activity-image" src="{{item.coverUrl}}" mode="aspectFill" />
          <!-- 活动类型标签 -->
          <view class="activity-type-tag">活动</view>
        </view>
        <view class="activity-info">
          <view class="activity-title">{{item.title}}</view>
          <view class="activity-desc">{{item.description}}</view>
          <view class="activity-footer">
            <view class="activity-time">
              <view class="time-item">
                <text class="time-icon">📅</text>
                <text class="time-text">{{item.timeRange}}</text>
              </view>
              <view class="location-item">
                <text class="location-icon">📍</text>
                <text class="location-text">{{item.location}}</text>
              </view>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>
  
  <!-- 精选装备模块 - 使用商场页面的商品卡片样式 -->
  <view class="section-container">
    <view class="section-header">
      <view class="section-title">
        <text class="section-emoji">⭐</text>
        <text>精选装备</text>
      </view>
      <view class="more-btn" bindtap="navigateTo" data-url="/pages/mall/index?category=featured">查看全部 ></view>
    </view>
    
    <!-- 两列商品卡片布局 - 与商场页面一致 -->
    <view class="product-grid">
      <view 
        class="product-card" 
        wx:for="{{featuredEquipment}}" 
        wx:key="id" 
        bindtap="navigateToDetail" 
        data-id="{{item.id}}" 
        data-type="product"
      >
        <view class="card-image-wrapper">
          <image class="card-image" src="{{item.imageUrl}}" mode="aspectFill"></image>
          <!-- 商品标签（热销/新品） -->
          <view class="product-tag">{{item.tag}}</view>
        </view>
        <view class="card-content">
          <text class="product-name">{{item.name}}</text>
          <view class="product-price-row">
            <text class="product-price">¥{{item.price}}</text>
            <text class="product-sales">{{item.sales}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>
</view>

<!-- 底部导航栏由全局配置的tabBar提供 -->
