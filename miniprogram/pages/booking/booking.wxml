<!--booking.wxml 预约页面-->
<view class="booking-container">
  <!-- 顶部搜索框 -->
  <view class="search-bar">
    <view class="search-input">
      <image class="search-icon" src="/assets/icons/search.png" mode="aspectFit"></image>
      <input type="text" placeholder="搜索场馆、教练" bindinput="onSearchInput" />
    </view>
    <view class="filter-btn" bindtap="showFilterOptions">
      <image src="/assets/icons/filter.png" mode="aspectFit"></image>
    </view>
  </view>

  <!-- 场馆选择 -->
  <view class="venue-selection">
    <view class="section-title">预约场馆</view>
    <view class="venue-list">
      <scroll-view scroll-x class="venue-scroll" enhanced show-scrollbar="{{false}}">
        <view
          wx:for="{{venues}}"
          wx:key="id"
          class="venue-item {{selectedVenue === item.id ? 'active' : ''}}"
          bindtap="selectVenue"
          data-id="{{item.id}}"
        >
          <image class="venue-image" src="{{item.imageUrl}}" mode="aspectFill"></image>
          <view class="venue-name">{{item.name}}</view>
          <view class="venue-address">{{item.address}}</view>
        </view>
      </scroll-view>
    </view>
  </view>

  <!-- 日期选择 -->
  <view class="date-selection">
    <view class="section-title">选择日期</view>
    <scroll-view scroll-x class="date-scroll" enhanced show-scrollbar="{{false}}">
      <view
        wx:for="{{dates}}"
        wx:key="date"
        class="date-item {{selectedDate === item.date ? 'active' : ''}}"
        bindtap="selectDate"
        data-date="{{item.date}}"
      >
        <view class="date-day">{{item.day}}</view>
        <view class="date-weekday">{{item.weekday}}</view>
      </view>
    </scroll-view>
  </view>

  <!-- 时间选择 -->
  <view class="time-selection">
    <view class="section-title">选择时间段</view>
    <view class="time-grid">
      <view
        wx:for="{{timeSlots}}"
        wx:key="id"
        class="time-item {{item.available ? '' : 'disabled'}} {{selectedTimeSlots.includes(item.id) ? 'active' : ''}}"
        bindtap="selectTimeSlot"
        data-id="{{item.id}}"
        data-available="{{item.available}}"
      >
        <text>{{item.time}}</text>
      </view>
    </view>
  </view>

  <!-- 场地类型选择 -->
  <view class="court-type-selection">
    <view class="section-title">场地类型</view>
    <view class="court-type-list">
      <view
        wx:for="{{courtTypes}}"
        wx:key="id"
        class="court-type-item {{selectedCourtType === item.id ? 'active' : ''}}"
        bindtap="selectCourtType"
        data-id="{{item.id}}"
      >
        <view class="court-type-name">{{item.name}}</view>
        <view class="court-type-price">{{item.price}}积分/小时</view>
      </view>
    </view>
  </view>

  <!-- 费用明细 -->
  <view class="booking-summary">
    <view class="summary-header">
      <text class="summary-title">费用明细</text>
    </view>
    <view class="summary-item">
      <text class="summary-label">场地费用</text>
      <text class="summary-value">{{totalPrice}} 积分</text>
    </view>
    <view class="summary-item">
      <text class="summary-label">已选时段</text>
      <text class="summary-value">{{selectedTimeSlots.length}} 小时</text>
    </view>
    <view class="summary-total">
      <text class="total-label">合计</text>
      <text class="total-value">{{totalPrice}} 积分</text>
    </view>
  </view>

  <!-- 提交预约按钮 -->
  <view class="submit-booking" bindtap="submitBooking">
    <button class="submit-btn">立即预约</button>
  </view>
</view> 