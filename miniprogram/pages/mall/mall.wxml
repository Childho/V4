<!--mall.wxml 商城页面-->
<view class="mall-container">
  <!-- 顶部搜索栏 -->
  <view class="search-bar">
    <view class="search-input">
      <image class="search-icon" src="/assets/icons/search.png" mode="aspectFit"></image>
      <input type="text" placeholder="搜索商品" bindinput="onSearchInput" />
    </view>
    <view class="cart-icon" bindtap="goToCart">
      <image src="/assets/icons/cart.png" mode="aspectFit"></image>
      <view class="badge" wx:if="{{cartItemCount > 0}}">{{cartItemCount}}</view>
    </view>
  </view>

  <!-- 商品分类标签 -->
  <scroll-view scroll-x class="categories-scroll" enhanced show-scrollbar="{{false}}">
    <view class="categories">
      <view 
        class="category-item {{activeCategory === 'all' ? 'active' : ''}}" 
        bindtap="switchCategory" 
        data-category="all"
      >全部</view>
      <view 
        class="category-item {{activeCategory === 'racket' ? 'active' : ''}}" 
        bindtap="switchCategory" 
        data-category="racket"
      >球拍</view>
      <view 
        class="category-item {{activeCategory === 'shoe' ? 'active' : ''}}" 
        bindtap="switchCategory" 
        data-category="shoe"
      >鞋服</view>
      <view 
        class="category-item {{activeCategory === 'accessory' ? 'active' : ''}}" 
        bindtap="switchCategory" 
        data-category="accessory"
      >配件</view>
      <view 
        class="category-item {{activeCategory === 'other' ? 'active' : ''}}" 
        bindtap="switchCategory" 
        data-category="other"
      >其他</view>
    </view>
  </scroll-view>

  <!-- 商品列表 -->
  <view class="product-list">
    <view class="product-card" wx:for="{{filteredProducts}}" wx:key="id" bindtap="goToProductDetail" data-id="{{item.id}}">
      <image class="product-image" src="{{item.imageUrl}}" mode="aspectFill"></image>
      <view class="product-info">
        <view class="product-brand">{{item.brand}}</view>
        <view class="product-name">{{item.name}}</view>
        <view class="product-price-box">
          <text class="product-price">{{item.price}} 积分</text>
          <view class="add-cart-btn" catchtap="addToCart" data-id="{{item.id}}">
            <image src="/assets/icons/add-cart.png" mode="aspectFit"></image>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- 无数据提示 -->
  <view class="empty-tip" wx:if="{{filteredProducts.length === 0}}">
    <image src="/assets/icons/empty.png" mode="aspectFit"></image>
    <text>暂无相关商品</text>
  </view>
</view> 