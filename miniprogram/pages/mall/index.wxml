<view class="mall-container">
  <!-- 搜索栏 -->
  <view class="search-bar">
    <view class="search-input">
      <image class="search-icon" src="/assets/icons/search.svg" mode="aspectFit"></image>
      <input type="text" placeholder="搜索商品" bindinput="onSearchInput" />
    </view>
    <view class="filter-icon" bindtap="showFilter">
      <image src="/assets/icons/filter.svg" mode="aspectFit"></image>
    </view>
    <view class="cart-icon" bindtap="goToCart">
      <image src="/assets/icons/cart.svg" mode="aspectFit"></image>
      <view class="badge" wx:if="{{cartItemCount > 0}}">{{cartItemCount}}</view>
    </view>
  </view>

  <!-- 品牌筛选 -->
  <view class="brand-filter">
    <view class="brand-filter-header">
      <text class="brand-filter-title">品牌筛选</text>
      <view class="btn-all" bindtap="toggleAllBrands">
        <text>{{brandFilterExpanded ? '收起' : '全部'}}</text>
        <image class="arrow-icon {{brandFilterExpanded ? 'expanded' : ''}}" src="/assets/icons/arrow-down.svg" mode="aspectFit"></image>
      </view>
    </view>
    <view class="brand-list-container">
      <!-- 默认显示的品牌 -->
      <view class="brand-list default-brands" wx:if="{{!brandFilterExpanded}}">
        <view class="brand-item {{selectedBrand === item ? 'active' : ''}}" 
              wx:for="{{defaultBrands}}" 
              wx:key="*this"
              bindtap="selectBrand" 
              data-brand="{{item}}">
          {{item}}
        </view>
      </view>
      
      <!-- 展开状态下显示所有品牌 -->
      <view class="brand-list all-brands" wx:if="{{brandFilterExpanded}}">
        <view class="brand-item {{selectedBrand === item ? 'active' : ''}}" 
              wx:for="{{brandOptions}}" 
              wx:key="*this"
              bindtap="selectBrand" 
              data-brand="{{item}}">
          {{item}}
        </view>
      </view>
    </view>
  </view>

  <!-- 商品分类 -->
  <view class="category-section">
    <view class="section-title">商品分类</view>
    <view class="category-grid">
      <view class="category-item" bindtap="navigateToCategory" data-category="racket">
        <image class="category-icon" src="/assets/icons/badminton-racket.svg" mode="aspectFit"></image>
        <text class="category-name">羽毛球拍</text>
      </view>
      <view class="category-item" bindtap="navigateToCategory" data-category="shoes">
        <image class="category-icon" src="/assets/icons/badminton-shoes.svg" mode="aspectFit"></image>
        <text class="category-name">羽毛球鞋</text>
      </view>
      <view class="category-item" bindtap="navigateToCategory" data-category="ball">
        <image class="category-icon" src="/assets/icons/badminton.svg" mode="aspectFit"></image>
        <text class="category-name">羽毛球</text>
      </view>
      <view class="category-item" bindtap="navigateToCategory" data-category="sportswear">
        <image class="category-icon" src="/assets/icons/sportswear.svg" mode="aspectFit"></image>
        <text class="category-name">运动服装</text>
      </view>
      <view class="category-item" bindtap="navigateToCategory" data-category="accessories">
        <image class="category-icon" src="/assets/icons/accessories.svg" mode="aspectFit"></image>
        <text class="category-name">球拍配件</text>
      </view>
      <view class="category-item" bindtap="navigateToCategory" data-category="discount">
        <image class="category-icon" src="/assets/icons/discount.svg" mode="aspectFit"></image>
        <text class="category-name">折扣专区</text>
      </view>
    </view>
  </view>

  <!-- 羽毛球拍产品列表 -->
  <view class="product-section">
    <view class="section-header">
      <text class="section-title">羽毛球拍</text>
      <view class="view-all" bindtap="viewAllProducts" data-category="racket">
        <text>查看全部</text>
        <text class="arrow">></text>
      </view>
    </view>
    
    <scroll-view scroll-x class="product-list" enhanced show-scrollbar="{{false}}">
      <view class="product-card" wx:for="{{rackets}}" wx:key="id" bindtap="goToProductDetail" data-id="{{item.id}}">
        <image class="product-image" src="{{item.imageUrl}}" mode="aspectFill"></image>
        <view class="product-info">
          <view class="product-name">{{item.name}}</view>
          <view class="product-price">¥{{item.price}}</view>
          <view class="product-sold">已售 {{item.soldCount}}</view>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- 羽毛球鞋产品列表 -->
  <view class="product-section">
    <view class="section-header">
      <text class="section-title">羽毛球鞋</text>
      <view class="view-all" bindtap="viewAllProducts" data-category="shoes">
        <text>查看全部</text>
        <text class="arrow">></text>
      </view>
    </view>
    
    <scroll-view scroll-x class="product-list" enhanced show-scrollbar="{{false}}">
      <view class="product-card" wx:for="{{shoes}}" wx:key="id" bindtap="goToProductDetail" data-id="{{item.id}}">
        <image class="product-image" src="{{item.imageUrl}}" mode="aspectFill"></image>
        <view class="product-info">
          <view class="product-name">{{item.name}}</view>
          <view class="product-price">¥{{item.price}}</view>
          <view class="product-sold">已售 {{item.soldCount}}</view>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- 羽毛球产品列表 -->
  <view class="product-section">
    <view class="section-header">
      <text class="section-title">羽毛球</text>
      <view class="view-all" bindtap="viewAllProducts" data-category="ball">
        <text>查看全部</text>
        <text class="arrow">></text>
      </view>
    </view>
    
    <scroll-view scroll-x class="product-list" enhanced show-scrollbar="{{false}}">
      <view class="product-card" wx:for="{{shuttlecocks}}" wx:key="id" bindtap="goToProductDetail" data-id="{{item.id}}">
        <image class="product-image" src="{{item.imageUrl}}" mode="aspectFill"></image>
        <view class="product-info">
          <view class="product-name">{{item.name}}</view>
          <view class="product-price">¥{{item.price}}</view>
          <view class="product-sold">已售 {{item.soldCount}}</view>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- 运动服装产品列表 -->
  <view class="product-section">
    <view class="section-header">
      <text class="section-title">运动服装</text>
      <view class="view-all" bindtap="viewAllProducts" data-category="sportswear">
        <text>查看全部</text>
        <text class="arrow">></text>
      </view>
    </view>
    
    <scroll-view scroll-x class="product-list" enhanced show-scrollbar="{{false}}">
      <view class="product-card" wx:for="{{sportswear}}" wx:key="id" bindtap="goToProductDetail" data-id="{{item.id}}">
        <image class="product-image" src="{{item.imageUrl}}" mode="aspectFill"></image>
        <view class="product-info">
          <view class="product-name">{{item.name}}</view>
          <view class="product-price">¥{{item.price}}</view>
          <view class="product-sold">已售 {{item.soldCount}}</view>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- 羽毛球配件产品列表 -->
  <view class="product-section">
    <view class="section-header">
      <text class="section-title">羽毛球配件</text>
      <view class="view-all" bindtap="viewAllProducts" data-category="accessories">
        <text>查看全部</text>
        <text class="arrow">></text>
      </view>
    </view>
    
    <scroll-view scroll-x class="product-list" enhanced show-scrollbar="{{false}}">
      <view class="product-card" wx:for="{{accessories}}" wx:key="id" bindtap="goToProductDetail" data-id="{{item.id}}">
        <image class="product-image" src="{{item.imageUrl}}" mode="aspectFill"></image>
        <view class="product-info">
          <view class="product-name">{{item.name}}</view>
          <view class="product-price">¥{{item.price}}</view>
          <view class="product-sold">已售 {{item.soldCount}}</view>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- 浮动购物车按钮 -->
  <view class="floating-cart-btn" bindtap="goToCart">
    <image src="/assets/icons/cart-white.svg" mode="aspectFit"></image>
    <view class="cart-badge" wx:if="{{cartItemCount > 0}}">{{cartItemCount}}</view>
  </view>
</view> 