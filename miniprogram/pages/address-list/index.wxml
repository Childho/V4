<!-- åœ°å€ç®¡ç†é¡µé¢ - æ˜¾ç¤ºç”¨æˆ·æ‰€æœ‰æ”¶è´§åœ°å€ -->
<view class="address-container">
  <!-- ä½¿ç”¨æç¤º - ä»…åœ¨æœ‰åœ°å€ä¸”éç¼–è¾‘æ¨¡å¼æ—¶æ˜¾ç¤º -->
  <view class="tips-bar" wx:if="{{addressList.length > 0 && !isEditMode}}">
    <text class="tips-text">ğŸ’¡ ç‚¹å‡»ç¼–è¾‘å¯ä¿®æ”¹åœ°å€ä¿¡æ¯å’Œè®¾ç½®é»˜è®¤åœ°å€</text>
  </view>

  <!-- é¡¶éƒ¨æ“ä½œæ  -->
  <view class="top-bar">
    <!-- å…¨é€‰æŒ‰é’® - ä»…åœ¨ç¼–è¾‘æ¨¡å¼ä¸‹æ˜¾ç¤º -->
    <view class="select-all" wx:if="{{isEditMode}}" bindtap="toggleSelectAll">
      <text class="select-icon {{isSelectAll ? 'selected' : ''}}">{{isSelectAll ? 'âœ“' : 'â—‹'}}</text>
      <text class="select-text">å…¨é€‰</text>
    </view>
    
    <!-- æ–°å¢åœ°å€æŒ‰é’® - éç¼–è¾‘æ¨¡å¼ä¸‹æ˜¾ç¤º -->
    <view class="top-add-btn" wx:if="{{!isEditMode}}" bindtap="addNewAddress">
      <text class="add-icon">+</text>
      <text class="add-text">æ–°å¢åœ°å€</text>
    </view>
    
    <!-- å³ä¾§æ“ä½œæŒ‰é’® -->
    <view class="action-buttons">
      <!-- ç¼–è¾‘/å®ŒæˆæŒ‰é’® -->
      <text class="edit-btn" bindtap="toggleEditMode" wx:if="{{addressList.length > 0}}">
        {{isEditMode ? 'å®Œæˆ' : 'ç¼–è¾‘'}}
      </text>
    </view>
  </view>

  <!-- åœ°å€åˆ—è¡¨ -->
  <view class="address-list" wx:if="{{addressList.length > 0}}">
    <view 
      class="address-item {{item.isDefault ? 'default' : ''}}" 
      wx:for="{{addressList}}" 
      wx:key="id"
      data-id="{{item.id}}"
      bindlongpress="onLongPress"
    >
      <!-- é€‰æ‹©æ¡† - ä»…åœ¨ç¼–è¾‘æ¨¡å¼ä¸‹æ˜¾ç¤º -->
      <view class="checkbox" wx:if="{{isEditMode}}" bindtap="toggleSelect" data-id="{{item.id}}">
        <text class="check-icon {{item.selected ? 'selected' : ''}}">{{item.selected ? 'âœ“' : 'â—‹'}}</text>
      </view>
      
      <!-- åœ°å€ä¿¡æ¯ä¸»ä½“ - ç‚¹å‡»å¯é€‰æ‹©åœ°å€ï¼ˆä»…åœ¨æ¥è‡ªè®¢å•é¡µé¢æ—¶ï¼‰ -->
      <view class="address-content" bindtap="selectAddress" data-id="{{item.id}}">
        <!-- æ”¶ä»¶äººä¿¡æ¯ -->
        <view class="recipient-info">
          <text class="name">{{item.consignee}}</text>
          <text class="phone">{{item.mobile}}</text>
          <!-- é»˜è®¤åœ°å€æ ‡è¯† -->
          <view class="default-tag" wx:if="{{item.isDefault}}">é»˜è®¤</view>
        </view>
        
        <!-- åœ°å€è¯¦æƒ… -->
        <view class="address-detail">
          <text class="address-text">{{item.region}} {{item.detail}}</text>
        </view>
      </view>
      
      <!-- æ“ä½œæŒ‰é’®åŒºåŸŸ -->
      <view class="action-buttons" wx:if="{{!isEditMode}}">
        <!-- ç¼–è¾‘æŒ‰é’® -->
        <view class="action-btn edit-btn" catchtap="editAddress" data-id="{{item.id}}">
          <text class="btn-text">ç¼–è¾‘</text>
        </view>
        <!-- åˆ é™¤æŒ‰é’® -->
        <view class="action-btn delete-btn" catchtap="deleteAddress" data-id="{{item.id}}">
          <text class="btn-text">åˆ é™¤</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€æç¤º -->
  <view class="empty-state" wx:if="{{addressList.length === 0}}">
    <image class="empty-icon" src="../../assets/icons/empty-box.svg" mode="aspectFit"></image>
    <text class="empty-text">æš‚æ— æ”¶è´§åœ°å€</text>
    <text class="empty-desc">è¯·æ·»åŠ æ‚¨çš„æ”¶è´§åœ°å€</text>
    <!-- ç©ºçŠ¶æ€ä¸‹çš„æ–°å¢æŒ‰é’® -->
    <view class="empty-add-btn" bindtap="addNewAddress">
      <text class="add-text">ç«‹å³æ·»åŠ </text>
    </view>
  </view>

  <!-- åº•éƒ¨æ“ä½œæ  -->
  <view class="bottom-actions" wx:if="{{isEditMode}}">
    <!-- ç¼–è¾‘æ¨¡å¼ä¸‹çš„æ‰¹é‡åˆ é™¤æŒ‰é’® -->
    <view class="batch-delete" wx:if="{{selectedIds.length > 0}}" bindtap="batchDelete">
      <text class="delete-text">åˆ é™¤é€‰ä¸­ ({{selectedIds.length}})</text>
    </view>
    
    <!-- ç¼–è¾‘æ¨¡å¼ä¸‹çš„æ–°å¢åœ°å€æŒ‰é’® -->
    <view class="add-address" bindtap="addNewAddress">
      <text class="add-icon">+</text>
      <text class="add-text">æ–°å¢åœ°å€</text>
    </view>
  </view>
</view>

<!-- ç¡®è®¤åˆ é™¤å¼¹çª— -->
<view class="modal-overlay" wx:if="{{showDeleteModal}}" bindtap="hideDeleteModal">
  <view class="modal-content" catchtap="">
    <view class="modal-header">
      <text class="modal-title">ç¡®è®¤åˆ é™¤</text>
    </view>
    <view class="modal-body">
      <text class="modal-message">{{deleteModalMessage}}</text>
    </view>
    <view class="modal-footer">
      <button class="modal-btn cancel" bindtap="hideDeleteModal">å–æ¶ˆ</button>
      <button class="modal-btn confirm" bindtap="confirmDelete">ç¡®è®¤</button>
    </view>
  </view>
</view> 