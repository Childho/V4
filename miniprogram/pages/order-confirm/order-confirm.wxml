<!-- è®¢å•ç¡®è®¤é¡µé¢ -->
<view class="order-confirm-container">
  
  <!-- æ”¶è´§åœ°å€æ¨¡å— -->
  <view class="address-section" bindtap="selectAddress">
    <view class="section-header">
      <text class="location-icon">ğŸ“</text>
      <text class="section-title">æ”¶è´§åœ°å€</text>
      <text class="arrow-icon">></text>
    </view>
    
    <view class="address-content" wx:if="{{addressInfo}}">
      <view class="address-info">
        <text class="receiver-name">{{addressInfo.name}}</text>
        <text class="receiver-phone">{{addressInfo.phone}}</text>
      </view>
      <view class="address-detail">{{addressInfo.address}}</view>
    </view>
    
    <view class="no-address" wx:else>
      <text class="no-address-text">è¯·é€‰æ‹©æ”¶è´§åœ°å€</text>
    </view>
  </view>

  <!-- å•†å“åˆ—è¡¨æ¨¡å— -->
  <view class="goods-section">
    <view class="section-header">
      <text class="shop-icon">ğŸª</text>
      <text class="section-title">å•†å“ä¿¡æ¯</text>
    </view>
    
    <view class="goods-list">
      <view class="goods-item" wx:for="{{orderGoods}}" wx:key="id">
        <image class="goods-image" src="{{item.image}}" mode="aspectFill"></image>
        <view class="goods-info">
          <view class="goods-name">{{item.name}}</view>
          <view class="goods-spec" wx:if="{{item.spec}}">{{item.spec}}</view>
          <view class="goods-bottom">
            <view class="goods-price">Â¥{{item.price}}</view>
            <view class="goods-quantity">x{{item.quantity}}</view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- ä¼˜æƒ åˆ¸é€‰æ‹©æ¨¡å— -->
  <view class="coupon-section" bindtap="selectCoupon">
    <view class="section-item">
      <view class="item-left">
        <text class="coupon-icon">ğŸ«</text>
        <text class="item-title">ä¼˜æƒ åˆ¸</text>
      </view>
      <view class="item-right">
        <text class="coupon-text" wx:if="{{selectedCoupon}}">-Â¥{{selectedCoupon.discount}}</text>
        <text class="coupon-text" wx:else>{{availableCoupons}}å¼ å¯ç”¨</text>
        <text class="arrow-icon">></text>
      </view>
    </view>
  </view>

  <!-- å¤‡æ³¨æ¨¡å— -->
  <view class="remark-section">
    <view class="section-item">
      <view class="item-left">
        <text class="remark-icon">ğŸ“</text>
        <text class="item-title">å¤‡æ³¨</text>
      </view>
      <input 
        class="remark-input" 
        placeholder="å¯å¡«å†™å¤‡æ³¨å†…å®¹ï¼ˆé€‰å¡«ï¼‰" 
        value="{{remark}}"
        bindinput="onRemarkInput"
        maxlength="100"
      />
    </view>
  </view>

  <!-- é‡‘é¢æ˜ç»†æ¨¡å— -->
  <view class="amount-section">
    <view class="amount-item">
      <text class="amount-label">å•†å“é‡‘é¢</text>
      <text class="amount-value">Â¥{{totalGoodsAmount}}</text>
    </view>
    <view class="amount-item" wx:if="{{selectedCoupon}}">
      <text class="amount-label">ä¼˜æƒ åˆ¸</text>
      <text class="amount-value discount">-Â¥{{selectedCoupon.discount}}</text>
    </view>
    <view class="amount-item">
      <text class="amount-label">è¿è´¹</text>
      <text class="amount-value free">{{shippingFee > 0 ? 'Â¥' + shippingFee : 'å…è¿è´¹'}}</text>
    </view>
  </view>

  <!-- å¼€å‘ç¥¨æç¤º -->
  <view class="invoice-tip">
    <text class="invoice-icon">ğŸ“„</text>
    <text class="invoice-text">å¼€å‘ç¥¨è”ç³»å®¢æœ</text>
  </view>

  <!-- åº•éƒ¨æ“ä½œåŒº -->
  <view class="footer-section">
    <view class="total-info">
      <text class="total-label">å®ä»˜é‡‘é¢ï¼š</text>
      <text class="total-amount">Â¥{{finalAmount}}</text>
    </view>
    <button 
      class="submit-button" 
      bindtap="submitOrder"
      disabled="{{!addressInfo || submitting}}"
    >
      {{submitting ? 'æäº¤ä¸­...' : 'æäº¤è®¢å•'}}
    </button>
  </view>

</view> 