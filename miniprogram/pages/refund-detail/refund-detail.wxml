<!--é€€æ¬¾è¯¦æƒ…é¡µé¢æ¨¡æ¿-->
<!--åŒ…å«ï¼šé¡µé¢å¤´éƒ¨ä¿¡æ¯ã€å•†å“ä¿¡æ¯ã€é€€æ¬¾è¯¦æƒ…ã€è¿›åº¦æ—¶é—´çº¿ã€åº•éƒ¨æ“ä½œæŒ‰é’®-->

<view class="container" wx:if="{{!loading && !hasError}}">
  
  <!-- é¡µé¢é¡¶éƒ¨ï¼šè®¢å•å·å’Œé€€æ¬¾ç¼–å· -->
  <view class="header-section">
    <view class="order-info">
      <view class="info-row">
        <text class="label">è®¢å•å·:</text>
        <text class="value">{{orderInfo.orderNo}}</text>
        <text class="copy-btn" bindtap="copyOrderNo">å¤åˆ¶</text>
      </view>
      <view class="info-row">
        <text class="label">é€€æ¬¾ç¼–å·:</text>
        <text class="value">{{orderInfo.refundNo}}</text>
        <text class="copy-btn" bindtap="copyRefundNo">å¤åˆ¶</text>
      </view>
    </view>
  </view>

  <!-- å•†å“ä¿¡æ¯åŒºåŸŸ -->
  <view class="product-section">
    <view class="section-title">å•†å“ä¿¡æ¯</view>
    <view class="product-card">
      <image class="product-image" src="{{productInfo.image}}" mode="aspectFill"></image>
      <view class="product-details">
        <view class="product-title">{{productInfo.title}}</view>
        <view class="product-spec">{{productInfo.spec}}</view>
        <view class="product-price-qty">
          <text class="price">Â¥{{productInfo.price}}</text>
          <text class="quantity">x{{productInfo.quantity}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- é€€æ¬¾ä¿¡æ¯åŒºåŸŸ -->
  <view class="refund-section">
    <view class="section-title">é€€æ¬¾ä¿¡æ¯</view>
    <view class="refund-card">
      
      <!-- é€€æ¬¾é‡‘é¢å’ŒçŠ¶æ€ -->
      <view class="refund-amount-status">
        <view class="amount-row">
          <text class="label">é€€æ¬¾é‡‘é¢:</text>
          <text class="amount">Â¥{{refundInfo.amount}}</text>
        </view>
        <view class="status-row">
          <text class="label">å½“å‰çŠ¶æ€:</text>
          <text class="status status-{{refundInfo.status}}">{{refundInfo.statusText}}</text>
        </view>
      </view>

      <!-- é€€æ¬¾è¯¦ç»†ä¿¡æ¯ -->
      <view class="refund-details">
        <view class="detail-row">
          <text class="label">é€€æ¬¾æ–¹å¼:</text>
          <text class="value">{{refundInfo.refundMethodText}}</text>
        </view>
        <view class="detail-row">
          <text class="label">é€€æ¬¾åŸå› :</text>
          <text class="value">{{refundInfo.reason}}</text>
        </view>
        <view class="detail-row">
          <text class="label">ç”³è¯·æ—¶é—´:</text>
          <text class="value">{{refundInfo.applyTime}}</text>
        </view>
        <view class="detail-row" wx:if="{{refundInfo.processTime}}">
          <text class="label">å¤„ç†æ—¶é—´:</text>
          <text class="value">{{refundInfo.processTime}}</text>
        </view>
        <view class="detail-row" wx:if="{{refundInfo.completeTime}}">
          <text class="label">å®Œæˆæ—¶é—´:</text>
          <text class="value">{{refundInfo.completeTime}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- é€€æ¬¾è¿›åº¦æ—¶é—´çº¿ -->
  <view class="progress-section">
    <view class="section-title">é€€æ¬¾è¿›åº¦</view>
    <view class="progress-timeline">
      <view 
        class="timeline-item timeline-{{item.status}}" 
        wx:for="{{progressList}}" 
        wx:key="step"
      >
        <!-- æ—¶é—´çº¿å›¾æ ‡ -->
        <view class="timeline-icon">
          <view class="icon-dot"></view>
          <view class="icon-line" wx:if="{{index < progressList.length - 1}}"></view>
        </view>
        
        <!-- æ—¶é—´çº¿å†…å®¹ -->
        <view class="timeline-content">
          <view class="timeline-title">{{item.title}}</view>
          <view class="timeline-desc">{{item.desc}}</view>
          <view class="timeline-time" wx:if="{{item.time}}">{{item.time}}</view>
        </view>
      </view>
    </view>
  </view>

</view>

<!-- åŠ è½½çŠ¶æ€ -->
<view class="loading-container" wx:if="{{loading}}">
  <view class="loading-content">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>
</view>

<!-- é”™è¯¯çŠ¶æ€ -->
<view class="error-container" wx:if="{{hasError}}">
  <view class="error-content">
    <view class="error-icon">ğŸ˜</view>
    <text class="error-message">{{errorMessage}}</text>
    <button class="retry-btn" bindtap="reloadData">é‡è¯•</button>
  </view>
</view>

<!-- åº•éƒ¨è”ç³»å®¢æœæŒ‰é’® -->
<view class="bottom-actions" wx:if="{{!loading && !hasError}}">
  <button class="contact-service-btn" bindtap="contactService">è”ç³»å®¢æœ</button>
</view> 