# API请求日志查看指南

## 🔍 如何查看API请求日志

### 1. 打开微信开发者工具控制台

#### 方法一：菜单方式
1. 打开微信开发者工具
2. 点击菜单栏 `调试` → `调试工具`
3. 在下方打开的面板中选择 `Console` 标签

#### 方法二：快捷键
- **Windows**: `Ctrl + Shift + I`
- **Mac**: `Cmd + Option + I`

### 2. 日志输出说明

当您打开首页时，应该能看到以下日志输出：

```
🚀 ===========================================
📱 倍特爱小程序 - API配置加载
🚀 ===========================================
🔧 当前环境: production
🌐 API地址: https://api.example.com
⏰ 超时时间: 6000ms
🐛 调试模式: 已开启
📅 加载时间: 2024/1/1 10:00:00
🚀 ===========================================
✅ 配置文件加载完成，请查看控制台获取API请求日志

🏠 ===========================================
🏠 首页开始加载
🏠 ===========================================
📐 状态栏高度+安全边距: 64
🚀 开始获取首页数据...
1️⃣ 准备获取轮播图数据...
2️⃣ 准备获取活动数据...
3️⃣ 准备获取精选装备数据...
4️⃣ 准备检查登录状态...
🏠 ===========================================
```

### 3. API请求日志格式

每个API请求都会显示详细的请求和响应信息：

#### 请求日志示例：
```
🌐 ===========================================
📤 发起API请求
🌐 ===========================================
🔗 请求URL: https://api.example.com/api/banners
📋 请求方法: GET
📦 请求数据: {}
🔐 需要认证: 否
📜 请求头: {
  "Content-Type": "application/json",
  "Accept": "application/json"
}
⏰ 请求时间: 2024/1/1 10:00:01
🌐 ===========================================
```

#### 响应日志示例：
```
🎯 ===========================================
📥 收到API响应
🎯 ===========================================
🔗 响应URL: https://api.example.com/api/banners
📊 HTTP状态码: 200
📄 响应数据: {
  "success": true,
  "error": 0,
  "message": "获取轮播图成功",
  "body": {
    "banners": [...]
  }
}
⏰ 响应时间: 2024/1/1 10:00:02
✅ 业务状态码: 0
✅ 业务是否成功: true
✅ 业务消息: 获取轮播图成功
🎯 ===========================================
```

#### 数据处理日志示例：
```
✅ 轮播图数据获取成功!
🎠 轮播图原始数据: { banners: [...] }
🎠 解析后的轮播图数据: [...]
🎠 轮播图数量: 3
✅ 轮播图数据已更新到页面
⏳ 轮播图加载状态已设置为false
```

### 4. 常见问题排查

#### 问题1：看不到任何日志
**可能原因：**
- 控制台没有正确打开
- 日志被过滤器隐藏

**解决方案：**
1. 确保选择了 `Console` 标签
2. 检查控制台右上角的过滤器，确保显示 `Info` 级别的日志
3. 清空控制台后重新加载页面

#### 问题2：只看到配置日志，没有API请求日志
**可能原因：**
- API地址配置错误
- 网络连接问题
- API服务器未启动

**解决方案：**
1. 检查 `config/index.js` 中的 `apiBaseUrl` 是否正确
2. 检查网络连接
3. 确认API服务器正在运行

#### 问题3：看到请求日志但没有响应日志
**可能原因：**
- API服务器响应超时
- API接口不存在
- 服务器内部错误

**解决方案：**
1. 检查API地址是否正确
2. 检查服务器日志
3. 测试API接口是否正常

### 5. 日志级别说明

| 图标 | 含义 | 级别 |
|------|------|------|
| 🚀 | 系统启动 | Info |
| 📤 | 发起请求 | Info |
| 📥 | 收到响应 | Info |
| ✅ | 操作成功 | Info |
| ❌ | 操作失败 | Error |
| 🔐 | 认证相关 | Info |
| ⏳ | 状态变更 | Debug |

### 6. 调试模式开关

如果您不想看到这么详细的日志，可以修改 `config/index.js`：

```javascript
// 关闭调试模式
config.debug = false

// 或者在生产环境配置中关闭
production: {
  apiBaseUrl: 'https://api.example.com',
  timeout: 6000,
  enableMock: false,
  debug: false  // 👈 改为false关闭日志
}
```

### 7. 性能监控

每个API请求都会记录时间戳，您可以通过对比请求时间和响应时间来监控API性能：

```
⏰ 请求时间: 2024/1/1 10:00:01.123
⏰ 响应时间: 2024/1/1 10:00:01.456
// 响应耗时：333ms
```

### 8. 错误日志查看

如果API请求失败，会显示详细的错误信息：

```
❌ 获取轮播图失败: {
  "error": 404,
  "message": "接口不存在",
  "data": {...}
}
```

### 9. 建议

1. **开发阶段**：保持 `debug: true`，便于调试
2. **测试阶段**：保持 `debug: true`，便于发现问题
3. **生产阶段**：设置 `debug: false`，提升性能
4. **问题排查**：临时开启 `debug: true`，定位问题后关闭

现在您应该能在微信开发者工具的控制台中看到详细的API请求日志了！🎉 